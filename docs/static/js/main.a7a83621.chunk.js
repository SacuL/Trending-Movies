(this["webpackJsonpTrending-Movies"]=this["webpackJsonpTrending-Movies"]||[]).push([[0],{155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(7),o=a.n(i),c=(a(92),a(13)),l=a(14),s=a(16),m=a(15),u=a(45),g=a(17),h=a(35),p=a(26),v=(a(93),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:this.props.className},r.a.createElement("img",{class:"logoOnly",alt:"Trending Movies Logo",src:"logo-86-78.png"}),r.a.createElement("img",{class:"logoText",alt:"Trending Movies Logo",src:"main-logo-200-100.png"}),r.a.createElement("img",{onClick:this.props.onClickFilter,class:"filterIcon",alt:"Filter",src:"filter_icon.svg"}),r.a.createElement("h1",null,"What's hot NOW?!"),r.a.createElement("div",null))}}]),t}(r.a.Component)),d=a(46),f=a(64),b=(a(94),a(95),a(96),function(e){var t=e.genres,a=e.genre,n=e.onGenreChange;return r.a.createElement("div",{className:"selection"},r.a.createElement("label",null,"Genre"),r.a.createElement("select",{value:a,onChange:n},t.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)}))))}),E=(a(97),a(67)),k=(a(153),a(154),(0,E.a.createSliderWithTooltip)(E.a.Range)),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){a.props.onChange({type:a.props.data.label,value:{min:e[0],max:e[1]}})},a}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this.props.data,t=e.min,a=e.max,n=e.step,i=e.value,o=e.label,c={};return c[t]=t,c[a]=a,r.a.createElement("div",{className:"slider"},r.a.createElement("label",null,o),r.a.createElement(k,{marks:c,min:t,max:a,onAfterChange:this.onChange,step:n,defaultValue:[i.min,i.max],tipProps:{placement:"bottom",visible:!0},sliderTrackStyle:{backgroundColor:"blue",height:10},handleStyle:{borderColor:"#a75d65",backgroundColor:"white"}}))}}]),t}(r.a.Component),y=(a(155),function(e){var t=e.onClick,a=e.children;return r.a.createElement("div",{className:"my-button"},r.a.createElement("button",{onClick:t},a))}),O=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.url).then((function(e){return e.json()})).then((function(t){return e.props.setGenres(t.genres)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props,t=e.genre,a=e.genres,n=e.onGenreChange,i=e.onChange,o=e.year,c=e.rating,l=e.runtime,s=e.onSearchButtonClick;return r.a.createElement("section",{className:this.props.className},r.a.createElement("img",{onClick:this.props.onClickFilter,class:"navigation-close",alt:"Filter",src:"cross.svg"}),r.a.createElement(b,{genre:t,genres:a,onGenreChange:n}),r.a.createElement(C,{data:o,onChange:i}),r.a.createElement(C,{data:c,onChange:i}),r.a.createElement(C,{data:l,onChange:i}),r.a.createElement(y,{onClick:s},"Search"))}}]),t}(r.a.Component),j=(a(156),a(157),function(e){var t=e.movie,a=t.id,n=t.title,i=t.poster_path,o=t.release_date,c=t.vote_average,l="https://image.tmdb.org/t/p/w342/".concat(i),s=o.substring(0,4);return r.a.createElement("li",{className:"movie-item"},r.a.createElement(h.b,{to:"/movie/".concat(a),className:"thumbnail"},r.a.createElement("img",{src:l,alt:n}),r.a.createElement("div",{className:"movie-description"},r.a.createElement("h2",null,n),r.a.createElement("section",{className:"movie-details"},r.a.createElement("div",{className:"movie-year"},r.a.createElement("span",{className:"title"},"Year"),r.a.createElement("span",null,s)),r.a.createElement("div",{className:"movie-rating"},r.a.createElement("span",{className:"title"},"Rating"),r.a.createElement("span",null,c))))))}),S=function(e){var t=e.movies,a=e.page,n=e.onPageIncrease,i=e.onPageDecrease;return r.a.createElement("section",null,r.a.createElement("ul",{className:"movies"},t.map((function(e){return r.a.createElement(j,{key:e.id,movie:e})}))),r.a.createElement("div",{className:"pagination"},r.a.createElement(y,{onClick:i},"Previous"),r.a.createElement("span",null,"Page ".concat(a)),r.a.createElement(y,{onClick:n},"Next")))},_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={page:1,total_pages:1,moviesUrl:"https://api.themoviedb.org/3/discover/movie?api_key=".concat("d5c3b9d3a553eb9bf44db91a4579c006","&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1"),movies:[],url:"https://api.themoviedb.org/3/genre/movie/list?api_key=".concat("d5c3b9d3a553eb9bf44db91a4579c006","&language=en-US"),genre:"Action",genres:[],year:{label:"year",min:1990,max:2020,step:1,value:{min:2015,max:2020}},rating:{label:"rating",min:0,max:10,step:1,value:{min:8,max:10}},runtime:{label:"runtime",min:0,max:300,step:15,value:{min:60,max:120}}},a.setGenres=function(e){a.setState({genres:e})},a.onGenreChange=function(e){a.setState({genre:e.target.value})},a.onChange=function(e){a.setState(Object(d.a)({},e.type,Object(f.a)({},a.state[e.type],{value:e.value})))},a.generateUrl=function(e){var t=e.genres,n=e.year,r=e.rating,i=e.runtime,o=e.page,c=t.find((function(t){return t.name===e.genre}));!!c&&c.id;var l="https://api.themoviedb.org/3/discover/movie?"+"api_key=".concat("d5c3b9d3a553eb9bf44db91a4579c006","&")+"language=en-US&sort_by=popularity.desc&"+"primary_release_date.gte=".concat(n.value.min,"-01-01&")+"primary_release_date.lte=".concat(n.value.max,"-12-31&")+"vote_average.gte=".concat(r.value.min,"&")+"vote_average.lte=".concat(r.value.max,"&")+"with_runtime.gte=".concat(i.value.min,"&")+"with_runtime.lte=".concat(i.value.max,"&")+"page=".concat(o,"&");a.setState({moviesUrl:l})},a.onSearchButtonClick=function(){a.setState({page:1}),a.generateUrl(a.state)},a.fetchMovies=function(e){fetch(e).then((function(e){return e.json()})).then((function(e){return a.storeMovies(e)})).catch((function(e){return console.log(e)}))},a.storeMovies=function(e){var t=e.results.map((function(e){return{vote_count:e.vote_count,id:e.id,genre_ids:e.genre_ids,poster_path:e.poster_path,title:e.title,vote_average:e.vote_average,release_date:e.release_date}}));a.setState({movies:t,total_pages:e.total_pages})},a.onPageIncrease=function(){var e=a.state,t=e.page+1;t<=e.total_pages&&a.setState({page:t})},a.onPageDecrease=function(){var e=a.state.page-1;e>0&&a.setState({page:e})},a.saveStateToLocalStorage=function(){localStorage.setItem("pinmovie.params",JSON.stringify(a.state))},a.getStateFromLocalStorage=function(){return JSON.parse(localStorage.getItem("pinmovie.params"))},a}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.getStateFromLocalStorage();!e||e&&!e.movies.length?this.fetchMovies(this.state.moviesUrl):(this.setState(Object(f.a)({},e)),this.generateUrl(e))}},{key:"componentWillUpdate",value:function(e,t){this.saveStateToLocalStorage(),this.state.moviesUrl!==t.moviesUrl&&this.fetchMovies(t.moviesUrl),this.state.page!==t.page&&this.generateUrl(t)}},{key:"render",value:function(){var e=this.props.showFilter?"navigation-open":"navigation";return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"main"},r.a.createElement(O,Object.assign({onClickFilter:this.props.onClickFilter,className:e,onChange:this.onChange,onGenreChange:this.onGenreChange,setGenres:this.setGenres,onSearchButtonClick:this.onSearchButtonClick},this.state)),r.a.createElement(S,{movies:this.state.movies,page:this.state.page,onPageIncrease:this.onPageIncrease,onPageDecrease:this.onPageDecrease})))}}]),t}(r.a.Component),N=(a(161),function(){return r.a.createElement("h2",null,"Loading Movie")}),F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,movie:{}},a}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.movieId,a="https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat("d5c3b9d3a553eb9bf44db91a4579c006","&language=en-US");fetch(a).then((function(e){return e.json()})).then((function(t){return e.setState({movie:t,isLoading:!1})})).catch((function(e){return console.log("Error:",e)}))}},{key:"render",value:function(){var e=this.state.movie,t=e.title,a=e.backdrop_path,n=e.release_date,i=e.genres,o=e.overview,c=e.vote_average,l=e.runtime,s=n?n.substring(0,4):null,m={backgroundImage:"url(http://image.tmdb.org/t/p/w1280/".concat(a,")")};return r.a.createElement("div",{className:"movie-page"},this.state.isLoading?r.a.createElement(N,null):r.a.createElement("div",null,r.a.createElement("div",{className:"movie-image",style:m}),r.a.createElement("div",{className:"movie-details"},r.a.createElement("h1",null,t,r.a.createElement("span",null,"(",s,")")),r.a.createElement("section",{className:"genres"},i.map((function(e,t){return r.a.createElement("div",{key:e.id},r.a.createElement("span",null,e.name),t<i.length-1&&r.a.createElement("span",{className:"separator"},"|"))}))),r.a.createElement("h5",null,"Rating:",r.a.createElement("span",null,c)),r.a.createElement("h5",null,"Runtime:",r.a.createElement("span",null,"".concat(l," min"))),r.a.createElement("h4",null,"Overview"),r.a.createElement("p",null,o))))}}]),t}(r.a.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={distanceToTop:0,showFilter:!1},a.onClickFilter=a.onClickFilter.bind(Object(u.a)(a)),a}return Object(g.a)(t,e),Object(l.a)(t,[{key:"handleScroll",value:function(){this.setState({distanceToTop:window.pageYOffset})}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll.bind(this))}},{key:"onClickFilter",value:function(){this.setState({showFilter:!this.state.showFilter})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement("div",{className:this.state.distanceToTop>250?"down":""},r.a.createElement(v,{onClickFilter:this.onClickFilter,className:"clone"}),r.a.createElement(v,{onClickFilter:this.onClickFilter}),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",render:function(){return r.a.createElement(_,{onClickFilter:e.onClickFilter,showFilter:e.state.showFilter})}}),r.a.createElement(p.a,{path:"/movie/:movieId",component:F}),r.a.createElement(p.a,{render:function(){return r.a.createElement(_,{onClickFilter:e.onClickFilter,showFilter:e.state.showFilter})}}))))}}]),t}(r.a.Component);o.a.render(r.a.createElement(w,null),document.getElementById("root"))},87:function(e,t,a){e.exports=a(162)},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.a7a83621.chunk.js.map